"use client";

import { createContext, useCallback, useContext, useEffect, useMemo, useState } from "react";

export type SupportedLanguage = "fr" | "en";

type TranslateParams = Record<string, string | number | undefined>;

type LanguageContextValue = {
  lang: SupportedLanguage;
  setLang: (lang: SupportedLanguage) => void;
  t: (key: string, params?: TranslateParams, fallback?: string) => string;
};

const LanguageContext = createContext<LanguageContextValue | undefined>(undefined);

const defaultLanguage: SupportedLanguage = "fr";

const translations: Record<SupportedLanguage, Record<string, string>> = {
  fr: {
    "nav.dashboard": "Tableau de bord",
    "nav.files": "Dossiers",
    "nav.files.all": "Tous les dossiers",
    "nav.files.pending": "En attente",
    "nav.files.documents": "Documents",
    "nav.files.myQueue": "Ma file",
    "nav.myCases": "Mes dossiers",
    "nav.newCase": "Nouveau dossier",
    "nav.myPayments": "Mes paiements",
    "nav.configuration": "Configuration",
    "nav.configuration.processes": "Processus",
    "nav.configuration.documentTypes": "Types de documents",
    "nav.configuration.rules": "Règles de validation",
    "nav.configuration.schemas": "Schémas de champs",
    "nav.users": "Utilisateurs",
    "nav.installers": "Installateurs",
    "nav.billing": "Facturation",
    "nav.analytics": "Analytique",
    "nav.activity": "Journal d'activité",
    "nav.settings": "Paramètres",
    "header.brand": "CEE Validation",
    "header.search.placeholder": "Rechercher dossiers, installateurs... (⌘K)",
    "header.toggle.expand": "Déplier le menu",
    "header.toggle.collapse": "Replier le menu",
    "header.notifications": "Notifications",
    "header.help": "Aide",
    "header.user.profile": "Profil",
    "header.user.settings": "Paramètres",
    "header.user.logout": "Déconnexion",
    "header.user.role.administrator": "Administrateur",
    "header.user.role.validator": "Validateur",
    "header.user.role.installer": "Installateur",
    "header.language.fr": "Français",
    "header.language.en": "Anglais",
    "header.language.switch": "Langue",
    "config.title": "Configuration",
    "config.subtitle": "Gérer les processus, règles et paramètres du système",
    "config.actions.viewAll": "Voir tout",
    "config.actions.create": "Créer",
    "config.sections.processes.title": "Processus",
    "config.sections.processes.description": "Configurer les processus CEE et leurs exigences documentaires",
    "config.sections.processes.stats": "{active} actifs sur {total}",
    "config.sections.rules.title": "Règles de validation",
    "config.sections.rules.description": "Gérer les règles de validation automatique des documents",
    "config.sections.rules.stats": "{active} actives sur {total}",
    "config.sections.documentTypes.title": "Types de documents",
    "config.sections.documentTypes.description": "Définir les types de documents et leurs schémas de champs",
    "config.sections.documentTypes.stats": "{system} système, {custom} personnalisés",
    "config.sections.schemas.title": "Schémas de champs",
    "config.sections.schemas.description": "Configurer les schémas d'extraction pour chaque type de document",
    "config.sections.schemas.stats": "{count} champs configurés",
    "config.overview.title": "Aperçu de la configuration",
    "config.overview.description": "Résumé des éléments configurés dans le système",
    "config.overview.processes": "Processus",
    "config.overview.rules": "Règles",
    "config.overview.documentTypes": "Types de documents",
    "config.overview.fields": "Champs",
    // Dashboard
    "dashboard.title": "Tableau de bord",
    "dashboard.welcome": "Bonjour, {name}",
    "dashboard.subtitle": "vendredi 28 novembre 2025 • Bonjour, Admin User",
    "dashboard.stats.validation": "En attente de validation",
    "dashboard.stats.processed": "Traités aujourd'hui",
    "dashboard.stats.accuracy": "Taux de précision",
    "dashboard.stats.avgTime": "Temps moyen",
    "dashboard.stats.vsYesterday": "↑ {percent}% vs hier",
    "dashboard.stats.vsSemLastWeek": "↓ {percent}% vs sem. dernière",
    "dashboard.stats.vsLastWeek": "↑ {percent}% vs sem. dernière",
    "dashboard.stats.improvement": "↓ {percent}% amélioration",
    "dashboard.cases.title": "Aperçu des dossiers",
    "dashboard.cases.all": "Tous ({count})",
    "dashboard.cases.new": "Nouveaux ({count})",
    "dashboard.cases.pending": "En attente ({count})",
    "dashboard.cases.approved": "Approuvés ({count})",
    "dashboard.actions.title": "Actions rapides",
    "dashboard.actions.newCase": "Nouveau dossier",
    "dashboard.actions.addInstaller": "Ajouter installateur",
    "dashboard.actions.configProcesses": "Configurer processus",
    "dashboard.actions.viewReports": "Voir rapports",
    "dashboard.system.title": "État du système",
    "dashboard.system.api": "API",
    "dashboard.system.database": "Base de données",
    "dashboard.system.storage": "Stockage",
    "dashboard.system.ai": "Services IA",
    "dashboard.system.search": "Recherche",
    "dashboard.system.operational": "Opérationnel",
    "dashboard.cases.viewAll": "Voir tous les dossiers",
    "dashboard.cases.noNew": "Aucun nouveau dossier cette semaine",
    "dashboard.cases.noPending": "Aucun dossier en attente",
    "dashboard.cases.noApproved": "Aucun dossier approuvé",
    // Validator Dashboard
    "dashboard.validator.myQueue": "Ma file d'attente",
    "dashboard.validator.validatedToday": "Validés aujourd'hui",
    "dashboard.validator.totalPending": "En attente (total)",
    "dashboard.validator.teamAccuracy": "Précision d'équipe",
    "dashboard.validator.vsYesterday": "vs hier",
    "dashboard.validator.vsLastWeek": "vs sem. dernière",
    "dashboard.validator.myValidationQueue": "Ma file de validation",
    "dashboard.validator.viewAll": "Voir tout",
    "dashboard.validator.noPending": "Aucun dossier en attente",
    "dashboard.validator.excellentWork": "Excellent travail !",
    "dashboard.validator.priority": "Prioritaire",
    "dashboard.validator.validate": "Valider",
    "dashboard.validator.unassigned": "Dossiers non assignés",
    "dashboard.validator.takeCharge": "Prendre en charge",
    "dashboard.validator.recentValidations": "Validations récentes",
    "dashboard.validator.performanceSummary": "Résumé de performance",
    "dashboard.validator.thisWeek": "Cette semaine",
    "dashboard.validator.cases": "dossiers",
    "dashboard.validator.approvalRate": "Taux d'approbation",
    "dashboard.validator.avgTime": "Temps moyen",
    "dashboard.validator.accuracy": "Précision",
    // Installer Dashboard
    "dashboard.installer.welcome": "Bienvenue",
    "dashboard.installer.activeCases": "Dossiers actifs",
    "dashboard.installer.approvedThisMonth": "Approuvés ce mois",
    "dashboard.installer.pendingPayment": "En attente de paiement",
    "dashboard.installer.vsLastMonth": "vs mois dernier",
    "dashboard.installer.submitNew": "Soumettre un nouveau dossier",
    "dashboard.installer.submitNewDesc": "Créez un nouveau dossier CEE pour vos récentes installations",
    "dashboard.installer.submitNow": "Soumettre maintenant",
    "dashboard.installer.recentCases": "Dossiers récents",
    "dashboard.installer.viewAll": "Voir tous mes dossiers",
    "dashboard.installer.paymentSummary": "Résumé des paiements",
    "dashboard.installer.totalReceived": "Total reçu",
    "dashboard.installer.pendingPayments": "Paiements en attente",
    "dashboard.installer.viewPayments": "Voir les paiements",
    "dashboard.installer.alerts": "Alertes",
    "dashboard.installer.documentsRequired": "Documents requis",
    "dashboard.installer.casesNeedAction": "{count} dossiers nécessitent votre attention",
    "dashboard.installer.viewCases": "Voir les dossiers",
    "dashboard.installer.startNewCase": "Démarrer un nouveau dossier CEE",
    "dashboard.installer.startNewCaseDesc": "Téléchargez vos documents et soumettez un nouveau dossier pour validation",
    "dashboard.installer.uploadDocuments": "Télécharger documents",
    "dashboard.installer.myRecentCases": "Mes dossiers récents",
    "dashboard.installer.submitted": "Soumis",
    "dashboard.installer.view": "Voir",
    "dashboard.installer.myPayments": "Mes paiements",
    "dashboard.installer.viewAllPayments": "Voir tous les paiements",
    "dashboard.installer.casesPaid": "{count} dossier(s) payé(s)",
    "dashboard.installer.casesInProgress": "{count} dossier(s) en cours",
    "dashboard.installer.notifications": "Notifications",
    "dashboard.installer.ago": "Il y a {time}",
    // Common
    "common.save": "Enregistrer",
    "common.cancel": "Annuler",
    "common.delete": "Supprimer",
    "common.edit": "Modifier",
    "common.create": "Créer",
    "common.add": "Ajouter",
    "common.remove": "Retirer",
    "common.close": "Fermer",
    "common.back": "Retour",
    "common.next": "Suivant",
    "common.previous": "Précédent",
    "common.search": "Rechercher",
    "common.filter": "Filtrer",
    "common.export": "Exporter",
    "common.import": "Importer",
    "common.download": "Télécharger",
    "common.upload": "Téléverser",
    "common.yes": "Oui",
    "common.no": "Non",
    "common.all": "Tous",
    "common.none": "Aucun",
    "common.loading": "Chargement...",
    "common.error": "Erreur",
    "common.success": "Succès",
    "common.warning": "Avertissement",
    "common.info": "Information",
    "common.confirm": "Confirmer",
    "common.active": "Actif",
    "common.inactive": "Inactif",
    "common.enabled": "Activé",
    "common.disabled": "Désactivé",
    "common.required": "Requis",
    "common.optional": "Optionnel",
    "common.draft": "Brouillon",
    "common.published": "Publié",
    "common.archived": "Archivé",
    // Status
    "status.approved": "Approuvé",
    "status.rejected": "Rejeté",
    "status.pending": "En attente",
    "status.inProgress": "En cours",
    "status.completed": "Terminé",
    "status.failed": "Échoué",
    "status.awaiting_review": "En attente de validation",
    "status.awaiting_documents": "En attente de documents",
    "status.processing": "Traitement en cours",
    "status.draft": "Brouillon",
    "status.billed": "Facturé",
    "status.paid": "Payé",
    "status.error": "Erreur",
    "status.active": "Actif",
    "status.inactive": "Inactif",
    // Processes
    "processes.title": "Processus",
    "processes.subtitle": "{count} processus configuré{plural}",
    "processes.create": "Créer un processus",
    "processes.import": "Importer un modèle",
    "processes.filter.category": "Catégorie",
    "processes.filter.status": "Statut",
    "processes.filter.allCategories": "Toutes les catégories",
    "processes.filter.allStatuses": "Tous les statuts",
    "processes.category.cee_residential": "CEE Résidentiel",
    "processes.category.cee_tertiary": "CEE Tertiaire",
    "processes.category.cee_industrial": "CEE Industriel",
    "processes.category.custom": "Personnalisé",
    "processes.badge.active": "Actif",
    "processes.badge.draft": "Brouillon",
    "processes.badge.coupDePouce": "Coup de pouce",
    "processes.stats.documents": "{count} documents",
    "processes.stats.rules": "{count} règles",
    "processes.stats.cases": "{count} dossiers",
    "processes.version": "Version {version}",
    "processes.updatedAt": "Mis à jour le {date}",
    "processes.filter.search": "Rechercher un processus...",
    // Process Configuration Wizard
    "processWizard.breadcrumb.home": "Accueil",
    "processWizard.breadcrumb.processes": "Processus",
    "processWizard.breadcrumb.new": "Nouveau",
    "processWizard.title.create": "Créer un processus",
    "processWizard.title.edit": "Modifier {code}",
    "processWizard.subtitle.create": "Configurer un nouveau processus CEE",
    "processWizard.subtitle.edit": "Modifier la configuration du processus",
    "processWizard.button.back": "Retour",
    "processWizard.button.preview": "Aperçu",
    "processWizard.button.saveDraft": "Enregistrer brouillon",
    "processWizard.button.activate": "Activer",
    "processWizard.tab.basic": "Informations de base",
    "processWizard.tab.documents": "Documents requis",
    "processWizard.tab.rules": "Règles de validation",
    "processWizard.tab.settings": "Paramètres spécifiques",
    "processWizard.basic.title": "Informations de base",
    "processWizard.basic.description": "Définir les informations principales du processus",
    "processWizard.basic.code": "Code",
    "processWizard.basic.codePlaceholder": "BAR-TH-171",
    "processWizard.basic.codeHint": "Format: Lettres majuscules, chiffres et tirets uniquement",
    "processWizard.basic.name": "Nom",
    "processWizard.basic.namePlaceholder": "Pompe à chaleur air/eau",
    "processWizard.basic.category": "Catégorie",
    "processWizard.basic.version": "Version",
    "processWizard.basic.versionPlaceholder": "1.0",
    "processWizard.basic.validFrom": "Valide à partir de",
    "processWizard.basic.descriptionLabel": "Description",
    "processWizard.basic.descriptionPlaceholder": "Description du processus...",
    "processWizard.basic.coupDePouce": "Coup de pouce",
    "processWizard.basic.coupDePoucheDesc": "Marquer ce processus comme éligible au Coup de pouce",
    "processWizard.basic.active": "Actif",
    "processWizard.basic.activeDesc": "Activer ce processus pour la soumission de dossiers",
    "processWizard.documents.title": "Documents requis",
    "processWizard.documents.description": "Définir les types de documents nécessaires pour ce processus",
    "processWizard.documents.add": "Ajouter un document",
    "processWizard.documents.empty": "Aucun document requis.",
    "processWizard.documents.emptyHint": "Cliquez sur \"Ajouter un document\" pour commencer.",
    "processWizard.documents.type": "Type de document",
    "processWizard.documents.required": "Requis",
    "processWizard.documents.requiredYes": "Oui",
    "processWizard.documents.requiredOptional": "Optionnel",
    "processWizard.documents.quantity": "Quantité",
    "processWizard.documents.available": "Types de documents disponibles à ajouter",
    "processWizard.documents.dialogTitle": "Ajouter un document requis",
    "processWizard.documents.dialogDescription": "Sélectionner un type de document et configurer ses exigences",
    "processWizard.documents.selectType": "Type de document",
    "processWizard.documents.selectPlaceholder": "Sélectionner un type de document",
    "processWizard.documents.requiredLabel": "Document requis",
    "processWizard.documents.requiredDesc": "Ce document est obligatoire pour le dossier",
    "processWizard.documents.condition": "Condition (optionnel)",
    "processWizard.documents.conditionPlaceholder": "ex: beneficiary.precarite !== 'CLASSIQUE'",
    "processWizard.documents.conditionHint": "Condition pour laquelle ce document devient requis",
    "processWizard.documents.minCount": "Quantité minimum",
    "processWizard.documents.maxCount": "Quantité maximum",
    "processWizard.rules.title": "Règles de validation inter-documents",
    "processWizard.rules.description": "Sélectionner les règles de validation à appliquer pour ce processus",
    "processWizard.rules.add": "Ajouter une règle",
    "processWizard.rules.empty": "Aucune règle configurée.",
    "processWizard.rules.emptyHint": "Cliquez sur \"Ajouter une règle\" pour sélectionner des règles existantes.",
    "processWizard.rules.browse": "Parcourir les règles disponibles",
    "processWizard.rules.rule": "Règle",
    "processWizard.rules.severity": "Sévérité",
    "processWizard.rules.statusLabel": "Statut",
    "processWizard.rules.enabled": "Activée",
    "processWizard.rules.disabled": "Désactivée",
    "processWizard.rules.addMore": "Ajouter d'autres règles ({count} disponibles)",
    "processWizard.rules.dialogTitle": "Ajouter des règles de validation",
    "processWizard.rules.dialogDescription": "Sélectionner les règles à appliquer pour ce processus",
    "processWizard.rules.allAdded": "Toutes les règles ont déjà été ajoutées.",
    "processWizard.rules.createNew": "Créer une nouvelle règle",
    "processWizard.rules.selected": "{count} règle(s) sélectionnée(s)",
    "processWizard.settings.title": "Paramètres spécifiques au processus",
    "processWizard.settings.description": "Configuration avancée pour ce type de processus",
    "processWizard.settings.kwhFormula": "Formule de calcul kWh Cumac",
    "processWizard.settings.kwhPlaceholder": "surface * coefficient * climate_zone_factor",
    "processWizard.settings.climateZones": "Zones climatiques",
    "processWizard.settings.certifications": "Certifications RGE requises",
    "processWizard.settings.certificationsPlaceholder": "QualiPAC, QualiSol...",
    "processWizard.settings.autoApprove": "Seuil d'approbation automatique (%)",
    "processWizard.settings.autoApproveHint": "Les dossiers avec un score de confiance supérieur seront approuvés automatiquement",
    // Dialogs
    "processWizard.addDocDialog.title": "Ajouter un document requis",
    "processWizard.addDocDialog.description": "Sélectionner un type de document et configurer ses exigences",
    "processWizard.addDocDialog.documentType": "Type de document *",
    "processWizard.addDocDialog.selectPlaceholder": "Sélectionner un type de document",
    "processWizard.addDocDialog.required": "Document requis",
    "processWizard.addDocDialog.requiredHint": "Ce document est obligatoire pour le dossier",
    "processWizard.addDocDialog.condition": "Condition (optionnel)",
    "processWizard.addDocDialog.conditionPlaceholder": "ex: beneficiary.precarite !== 'CLASSIQUE'",
    "processWizard.addDocDialog.conditionHint": "Condition pour laquelle ce document devient requis",
    "processWizard.addDocDialog.minCount": "Quantité minimum",
    "processWizard.addDocDialog.maxCount": "Quantité maximum",
    "processWizard.addDocDialog.cancel": "Annuler",
    "processWizard.addDocDialog.add": "Ajouter",
    "processWizard.addRuleDialog.title": "Ajouter des règles de validation",
    "processWizard.addRuleDialog.description": "Sélectionner les règles à appliquer pour ce processus",
    "processWizard.addRuleDialog.allRulesAdded": "Toutes les règles ont déjà été ajoutées.",
    "processWizard.addRuleDialog.createNew": "Créer une nouvelle règle",
    "processWizard.addRuleDialog.rulesSelected": "{count} règle(s) sélectionnée(s)",
    "processWizard.addRuleDialog.cancel": "Annuler",
    "processWizard.addRuleDialog.add": "Ajouter",
    "processWizard.addRuleDialog.addWithCount": "Ajouter ({count})",
    // Rule Wizard
    "ruleWizard.breadcrumb.home": "Accueil",
    "ruleWizard.breadcrumb.rules": "Règles",
    "ruleWizard.breadcrumb.new": "Nouvelle",
    "ruleWizard.title.create": "Créer une règle de validation",
    "ruleWizard.title.edit": "Modifier {code}",
    "ruleWizard.subtitle.create": "Définir une nouvelle règle de validation",
    "ruleWizard.subtitle.edit": "Modifier la règle de validation",
    "ruleWizard.button.back": "Retour",
    "ruleWizard.button.test": "Tester la règle",
    "ruleWizard.button.save": "Enregistrer et activer",
    "ruleWizard.basic.title": "Informations de la règle",
    "ruleWizard.basic.cardDescription": "Définir les informations de base de la règle",
    "ruleWizard.basic.code": "Code *",
    "ruleWizard.basic.name": "Nom *",
    "ruleWizard.basic.namePlaceholder": "Cohérence Prime CEE",
    "ruleWizard.basic.description": "Description",
    "ruleWizard.basic.descriptionPlaceholder": "Décrire ce que vérifie cette règle...",
    "ruleWizard.basic.type": "Type de règle *",
    "ruleWizard.basic.typeDocument": "Règle document",
    "ruleWizard.basic.typeCrossDocument": "Règle inter-documents",
    "ruleWizard.basic.typeGlobal": "Règle globale",
    "ruleWizard.basic.severity": "Sévérité *",
    "ruleWizard.basic.severityError": "Erreur",
    "ruleWizard.basic.severityWarning": "Avertissement",
    "ruleWizard.basic.severityInfo": "Information",
    "ruleWizard.basic.autoReject": "Rejet auto",
    "ruleWizard.scope.title": "Portée de la règle",
    "ruleWizard.scope.description": "Définir à quels processus et documents cette règle s'applique",
    "ruleWizard.scope.process": "S'applique au processus",
    "ruleWizard.scope.processPlaceholder": "Sélectionner un processus",
    "ruleWizard.scope.allProcesses": "Tous les processus",
    "ruleWizard.scope.documentTypesAvailable": "{count} types de documents disponibles pour ce processus",
    "ruleWizard.scope.documentTypes": "Types de documents",
    "ruleWizard.scope.documentTypesHint": "Sélectionnez les types de documents concernés par cette règle",
    "ruleWizard.scope.fieldsCount": "({count} champs)",
    "ruleWizard.scope.warning": "⚠ Sélectionnez au moins un type de document pour accéder aux champs disponibles",
    "ruleWizard.condition.title": "Constructeur de condition",
    "ruleWizard.condition.description": "Définir la logique de validation",
    "ruleWizard.condition.tabVisual": "Visuel",
    "ruleWizard.condition.tabExpression": "Expression",
    "ruleWizard.condition.emptyState": "Sélectionnez des types de documents pour accéder aux champs",
    "ruleWizard.condition.sourceField": "Champ source",
    "ruleWizard.condition.operator": "Opérateur",
    "ruleWizard.condition.operatorEquals": "égal à",
    "ruleWizard.condition.operatorNotEquals": "différent de",
    "ruleWizard.condition.operatorGreaterThan": "supérieur à",
    "ruleWizard.condition.operatorLessThan": "inférieur à",
    "ruleWizard.condition.operatorGreaterOrEqual": "supérieur ou égal à",
    "ruleWizard.condition.operatorLessOrEqual": "inférieur ou égal à",
    "ruleWizard.condition.operatorContains": "contient",
    "ruleWizard.condition.operatorStartsWith": "commence par",
    "ruleWizard.condition.operatorEndsWith": "se termine par",
    "ruleWizard.condition.operatorIsEmpty": "est vide",
    "ruleWizard.condition.operatorIsNotEmpty": "n'est pas vide",
    "ruleWizard.condition.type": "Type",
    "ruleWizard.condition.typeStatic": "Valeur fixe",
    "ruleWizard.condition.typeField": "Autre champ",
    "ruleWizard.condition.targetField": "Champ cible",
    "ruleWizard.condition.value": "Valeur",
    "ruleWizard.condition.addCondition": "Ajouter une condition",
    "ruleWizard.condition.expressionHint": "Utiliser la syntaxe JavaScript pour définir la condition",
    "ruleWizard.error.title": "Message d'erreur",
    "ruleWizard.error.description": "Message affiché lorsque la règle échoue",
    "ruleWizard.error.placeholder": "Le montant de la prime CEE diffère entre les documents...",
    "ruleWizard.error.hint": "Utiliser {field_name} pour insérer des valeurs dynamiques",
    "ruleWizard.sidebar.statusTitle": "Statut",
    "ruleWizard.sidebar.activeRule": "Règle active",
    "ruleWizard.sidebar.autoReject": "Rejet automatique",
    "ruleWizard.sidebar.statisticsTitle": "Statistiques",
    "ruleWizard.sidebar.evaluations": "Évaluations",
    "ruleWizard.sidebar.successRate": "Taux de réussite",
    "ruleWizard.sidebar.overrides": "Contournements",
    "ruleWizard.sidebar.fieldsTitle": "Champs disponibles",
    "ruleWizard.sidebar.fieldsHint": "Cliquez pour copier le chemin du champ",
    "ruleWizard.sidebar.fieldsEmptyState": "Sélectionnez des types de documents pour voir les champs disponibles",
    "ruleWizard.sidebar.clickToCopy": "Cliquer pour copier: {path}",
    // Document Type Wizard
    "docTypeWizard.breadcrumb.home": "Accueil",
    "docTypeWizard.breadcrumb.config": "Configuration",
    "docTypeWizard.breadcrumb.types": "Types de documents",
    "docTypeWizard.breadcrumb.new": "Nouveau",
    "docTypeWizard.title.create": "Créer un type de document",
    "docTypeWizard.title.edit": "Modifier {code}",
    "docTypeWizard.subtitle.create": "Définir un nouveau type de document et ses champs",
    "docTypeWizard.subtitle.edit": "Modifier la configuration du type de document",
    "docTypeWizard.button.back": "Retour",
    "docTypeWizard.button.preview": "Aperçu",
    "docTypeWizard.button.save": "Enregistrer",
    "docTypeWizard.tab.basic": "Informations de base",
    "docTypeWizard.tab.fields": "Schéma des champs",
    "docTypeWizard.tab.extraction": "Paramètres d'extraction",
    "docTypeWizard.basic.title": "Informations de base",
    "docTypeWizard.basic.cardDescription": "Définir les informations principales du type de document",
    "docTypeWizard.basic.code": "Code *",
    "docTypeWizard.basic.codeHint": "Identifiant unique du type de document",
    "docTypeWizard.basic.name": "Nom *",
    "docTypeWizard.basic.category": "Catégorie *",
    "docTypeWizard.basic.expectedPages": "Pages attendues",
    "docTypeWizard.basic.pageRange.from": "de",
    "docTypeWizard.basic.pageRange.to": "à",
    "docTypeWizard.basic.pageRange.pages": "pages",
    "docTypeWizard.basic.description": "Description",
    "docTypeWizard.basic.descriptionPlaceholder": "Description du type de document...",
    "docTypeWizard.basic.classificationHints": "Indices de classification",
    "docTypeWizard.basic.classificationHintsPlaceholder": "devis, quote, proposition, estimation",
    "docTypeWizard.basic.classificationHintsHint": "Mots-clés séparés par des virgules pour aider à classifier ce type de document",
    "docTypeWizard.basic.active": "Actif",
    "docTypeWizard.basic.activeHint": "Ce type de document peut être utilisé dans les processus",
    "docTypeWizard.dataType.text": "Texte",
    "docTypeWizard.dataType.integer": "Entier",
    "docTypeWizard.dataType.decimal": "Décimal",
    "docTypeWizard.dataType.currency": "Monétaire",
    "docTypeWizard.dataType.date": "Date",
    "docTypeWizard.dataType.boolean": "Booléen",
    "docTypeWizard.dataType.email": "Email",
    "docTypeWizard.dataType.phone": "Téléphone",
    "docTypeWizard.dataType.address": "Adresse",
    "docTypeWizard.dataType.enum": "Liste de valeurs",
    "docTypeWizard.dataType.signature": "Signature",
    "docTypeWizard.category.commercial": "Commercial",
    "docTypeWizard.category.legal": "Légal",
    "docTypeWizard.category.administrative": "Administratif",
    "docTypeWizard.category.technical": "Technique",
    "docTypeWizard.category.photos": "Photos",
    "docTypeWizard.fields.title": "Schéma des champs",
    "docTypeWizard.fields.description": "Définir les champs à extraire de ce type de document",
    "docTypeWizard.fields.addField": "Ajouter un champ",
    "docTypeWizard.fields.emptyTitle": "Aucun champ défini",
    "docTypeWizard.fields.emptyDescription": "Cliquez sur \"Ajouter un champ\" pour commencer à définir le schéma",
    "docTypeWizard.fields.addFirstField": "Ajouter le premier champ",
    "docTypeWizard.fields.required": "Requis",
    "docTypeWizard.fields.confidence": "Confiance: {value}%",
    "docTypeWizard.fields.othersGroup": "Autres",
    "docTypeWizard.fields.extractionHints": "Indices d'extraction",
    "docTypeWizard.fields.postProcessing": "Post-traitement",
    "docTypeWizard.fields.uppercase": "Majuscules",
    "docTypeWizard.fields.lowercase": "Minuscules",
    "docTypeWizard.fields.trim": "Trim",
    "docTypeWizard.fields.removeSpecialChars": "Sans caractères spéciaux",
    "docTypeWizard.fields.none": "Aucun",
    "docTypeWizard.fields.crossRefFields": "Champs de référence croisée",
    "docTypeWizard.extraction.title": "Paramètres d'extraction",
    "docTypeWizard.extraction.description": "Configuration avancée pour l'extraction des données",
    "docTypeWizard.extraction.defaultConfidence": "Seuil de confiance par défaut (%)",
    "docTypeWizard.extraction.defaultConfidenceHint": "Seuil minimum de confiance pour valider une extraction",
    "docTypeWizard.extraction.strictOcr": "Validation OCR stricte",
    "docTypeWizard.extraction.strictOcrHint": "Rejeter les extractions avec une qualité OCR insuffisante",
    "docTypeWizard.extraction.multiPage": "Extraction multi-pages",
    "docTypeWizard.extraction.multiPageHint": "Permettre l'extraction de champs répartis sur plusieurs pages",
    "docTypeWizard.fieldDialog.titleEdit": "Modifier le champ",
    "docTypeWizard.fieldDialog.titleAdd": "Ajouter un nouveau champ",
    "docTypeWizard.fieldDialog.description": "Définir les propriétés du champ à extraire",
    "docTypeWizard.fieldDialog.internalName": "Nom interne *",
    "docTypeWizard.fieldDialog.internalNameHint": "Utilisé dans les règles et expressions",
    "docTypeWizard.fieldDialog.displayName": "Nom affiché *",
    "docTypeWizard.fieldDialog.dataType": "Type de données *",
    "docTypeWizard.fieldDialog.group": "Groupe",
    "docTypeWizard.fieldDialog.groupPlaceholder": "Identification, Financial, Technical...",
    "docTypeWizard.fieldDialog.extractionHints": "Indices d'extraction",
    "docTypeWizard.fieldDialog.extractionHintsPlaceholder": "prime, cee, montant, énergie",
    "docTypeWizard.fieldDialog.extractionHintsHint": "Mots-clés séparés par des virgules pour aider à localiser ce champ",
    "docTypeWizard.fieldDialog.confidence": "Seuil de confiance (%)",
    "docTypeWizard.fieldDialog.required": "Champ requis",
    "docTypeWizard.fieldDialog.maxLength": "Longueur max",
    "docTypeWizard.fieldDialog.validationRegex": "Regex de validation",
    "docTypeWizard.fieldDialog.minValue": "Valeur minimum",
    "docTypeWizard.fieldDialog.maxValue": "Valeur maximum",
    "docTypeWizard.fieldDialog.enumValues": "Valeurs possibles",
    "docTypeWizard.fieldDialog.enumValuesHint": "Une valeur par ligne",
    "docTypeWizard.fieldDialog.postProcessing": "Post-traitement",
    "docTypeWizard.fieldDialog.postProcessingHint": "Supprimer espaces",
    "docTypeWizard.fieldDialog.crossRefFields": "Champs de référence croisée",
    "docTypeWizard.fieldDialog.crossRefFieldsPlaceholder": "facture.prime_cee, cdc.prime_montant",
    "docTypeWizard.fieldDialog.crossRefFieldsHint": "Champs d'autres documents pour comparaison automatique",
    "docTypeWizard.fieldDialog.cancel": "Annuler",
    "docTypeWizard.fieldDialog.add": "Ajouter",
    "docTypeWizard.common.copy": "(copie)",
    // Rules
    "rules.title": "Règles de validation",
    "rules.subtitle": "{count} règle{plural} configurée{plural}",
    "rules.create": "Créer une règle",
    "rules.import": "Importer des règles",
    "rules.tabs.all": "Toutes les règles ({count})",
    "rules.tabs.document": "Règles document ({count})",
    "rules.tabs.crossDocument": "Règles inter-documents ({count})",
    "rules.tabs.global": "Règles globales ({count})",
    "rules.type.document": "Document",
    "rules.type.cross_document": "Inter-documents",
    "rules.type.global": "Global",
    "rules.severity.error": "Erreur",
    "rules.severity.warning": "Avertissement",
    "rules.severity.info": "Info",
    "rules.stats.passed": "{passed}/{total} réussis",
    "rules.stats.overrides": "{count} contournements",
    "rules.filter.search": "Recherche",
    "rules.filter.searchPlaceholder": "Rechercher une règle...",
    "rules.filter.severity": "Sévérité",
    "rules.filter.severityAll": "Toutes les sévérités",
    "rules.filter.status": "Statut",
    "rules.filter.statusAll": "Tous les statuts",
    "rules.table.code": "Code",
    "rules.table.name": "Nom",
    "rules.table.type": "Type",
    "rules.table.severity": "Sévérité",
    "rules.table.appliesTo": "S'applique à",
    "rules.table.statistics": "Statistiques",
    "rules.table.active": "Actif",
    "rules.table.actions": "Actions",
    // Document Types
    "documentTypes.title": "Types de documents",
    "documentTypes.subtitle": "{count} type{plural} de document{plural}",
    "documentTypes.create": "Créer un type",
    "documentTypes.import": "Importer des types",
    "documentTypes.category.commercial": "Commercial",
    "documentTypes.category.technical": "Technique",
    "documentTypes.category.administrative": "Administratif",
    "documentTypes.category.financial": "Financier",
    "documentTypes.category.legal": "Juridique",
    "documentTypes.badge.system": "Système",
    "documentTypes.badge.custom": "Personnalisé",
    "documentTypes.stats.fields": "{count} champs",
    "documentTypes.stats.rules": "{count} règles",
    "documentTypes.filter.search": "Recherche",
    "documentTypes.filter.searchPlaceholder": "Rechercher un type de document...",
    "documentTypes.filter.category": "Catégorie",
    "documentTypes.filter.categoryAll": "Toutes les catégories",
    "documentTypes.filter.type": "Type",
    "documentTypes.filter.typeAll": "Tous",
    "documentTypes.filter.typeSystem": "Système",
    "documentTypes.filter.typeCustom": "Personnalisé",
    "documentTypes.category.photos": "Photos",
    "documentTypes.table.code": "Code",
    "documentTypes.table.name": "Nom",
    "documentTypes.table.category": "Catégorie",
    "documentTypes.table.fields": "Champs",
    "documentTypes.table.rules": "Règles",
    "documentTypes.table.system": "Système",
    "documentTypes.table.status": "Statut",
    "documentTypes.table.actions": "Actions",
    // Cases/Dossiers
    "cases.title": "Dossiers",
    "cases.subtitle": "{count} dossiers au total",
    "cases.export": "Exporter",
    "cases.new": "Nouveau dossier",
    "cases.search": "Rechercher par référence, bénéficiaire, installateur...",
    "cases.filters.status": "En attente",
    "cases.filters.allProcesses": "Tous les processus",
    "cases.filters.allInstallers": "Tous les installateurs",
    "cases.filters.allValidators": "Tous les validateurs",
    "cases.table.reference": "Référence",
    "cases.table.beneficiary": "Bénéficiaire",
    "cases.table.process": "Processus",
    "cases.table.installer": "Installateur",
    "cases.table.status": "Statut",
    "cases.table.confidence": "Confiance",
    "cases.table.validator": "Validateur",
    "cases.table.updated": "Mis à jour",
    "cases.pagination.showing": "Affichage de {start} à {end} sur {total} résultats",
    "cases.pagination.previous": "Précédent",
    "cases.pagination.next": "Suivant",
    // Billing
    "billing.readyToInvoice": "Prêts à facturer",
    "billing.invoicedThisMonth": "Facturés ce mois",
    "billing.paidThisMonth": "Payés ce mois",
    "billing.pending": "En attente",
    "billing.table.title": "Prêts à facturer",
    "billing.table.subtitle": "Dossiers approuvés en attente de facturation",
    "billing.table.approvalDate": "Date approbation",
    "billing.table.primeAmount": "Montant Prime",
    "billing.table.actions": "Actions",
    "billing.action.invoice": "Facturer",
    "billing.activity.title": "Activité récente",
    "billing.activity.subtitle": "Dernières actions de facturation",
    "billing.activity.action": "Action",
    "billing.activity.amount": "Montant",
    "billing.activity.date": "Date",
    "billing.activity.user": "Utilisateur",
    "billing.status.paid": "Payé",
    "billing.status.invoiced": "Facturé",
    // Actions
    "actions.viewDetails": "Voir détails",
    "actions.validate": "Valider",
    "actions.assignValidator": "Assigner validateur",
    "actions.markPriority": "Marquer prioritaire",
  },
  en: {
    "nav.dashboard": "Dashboard",
    "nav.files": "Cases",
    "nav.files.all": "All cases",
    "nav.files.pending": "Pending",
    "nav.files.documents": "Documents",
    "nav.files.myQueue": "My queue",
    "nav.myCases": "My cases",
    "nav.newCase": "New case",
    "nav.myPayments": "My payments",
    "nav.configuration": "Configuration",
    "nav.configuration.processes": "Processes",
    "nav.configuration.documentTypes": "Document types",
    "nav.configuration.rules": "Validation rules",
    "nav.configuration.schemas": "Field schemas",
    "nav.users": "Users",
    "nav.installers": "Installers",
    "nav.billing": "Billing",
    "nav.analytics": "Analytics",
    "nav.activity": "Activity log",
    "nav.settings": "Settings",
    "header.brand": "CEE Validation",
    "header.search.placeholder": "Search cases, installers... (⌘K)",
    "header.toggle.expand": "Expand menu",
    "header.toggle.collapse": "Collapse menu",
    "header.notifications": "Notifications",
    "header.help": "Help",
    "header.user.profile": "Profile",
    "header.user.settings": "Settings",
    "header.user.logout": "Sign out",
    "header.user.role.administrator": "Administrator",
    "header.user.role.validator": "Validator",
    "header.user.role.installer": "Installer",
    "header.language.fr": "French",
    "header.language.en": "English",
    "header.language.switch": "Language",
    "config.title": "Configuration",
    "config.subtitle": "Manage processes, rules, and system parameters",
    "config.actions.viewAll": "View all",
    "config.actions.create": "Create",
    "config.sections.processes.title": "Processes",
    "config.sections.processes.description": "Configure CEE processes and their document requirements",
    "config.sections.processes.stats": "{active} active of {total}",
    "config.sections.rules.title": "Validation rules",
    "config.sections.rules.description": "Manage automated document validation rules",
    "config.sections.rules.stats": "{active} active of {total}",
    "config.sections.documentTypes.title": "Document types",
    "config.sections.documentTypes.description": "Define document types and their field schemas",
    "config.sections.documentTypes.stats": "{system} system, {custom} custom",
    "config.sections.schemas.title": "Field schemas",
    "config.sections.schemas.description": "Configure extraction schemas for each document type",
    "config.sections.schemas.stats": "{count} fields configured",
    "config.overview.title": "Configuration overview",
    "config.overview.description": "Summary of the configured elements",
    "config.overview.processes": "Processes",
    "config.overview.rules": "Rules",
    "config.overview.documentTypes": "Document types",
    "config.overview.fields": "Fields",
    // Dashboard
    "dashboard.title": "Dashboard",
    "dashboard.welcome": "Hello, {name}",
    "dashboard.subtitle": "Friday, November 28, 2025 • Hello, Admin User",
    "dashboard.stats.validation": "Awaiting validation",
    "dashboard.stats.processed": "Processed today",
    "dashboard.stats.accuracy": "Accuracy rate",
    "dashboard.stats.avgTime": "Average time",
    "dashboard.stats.vsYesterday": "↑ {percent}% vs yesterday",
    "dashboard.stats.vsSemLastWeek": "↓ {percent}% vs last week",
    "dashboard.stats.vsLastWeek": "↑ {percent}% vs last week",
    "dashboard.stats.improvement": "↓ {percent}% improvement",
    "dashboard.cases.title": "Cases overview",
    "dashboard.cases.all": "All ({count})",
    "dashboard.cases.new": "New ({count})",
    "dashboard.cases.pending": "Pending ({count})",
    "dashboard.cases.approved": "Approved ({count})",
    "dashboard.actions.title": "Quick actions",
    "dashboard.actions.newCase": "New case",
    "dashboard.actions.addInstaller": "Add installer",
    "dashboard.actions.configProcesses": "Configure processes",
    "dashboard.actions.viewReports": "View reports",
    "dashboard.system.title": "System status",
    "dashboard.system.api": "API",
    "dashboard.system.database": "Database",
    "dashboard.system.storage": "Storage",
    "dashboard.system.ai": "AI Services",
    "dashboard.system.search": "Search",
    "dashboard.system.operational": "Operational",
    "dashboard.cases.viewAll": "View all cases",
    "dashboard.cases.noNew": "No new cases this week",
    "dashboard.cases.noPending": "No pending cases",
    "dashboard.cases.noApproved": "No approved cases",
    // Validator Dashboard
    "dashboard.validator.myQueue": "My queue",
    "dashboard.validator.validatedToday": "Validated today",
    "dashboard.validator.totalPending": "Pending (total)",
    "dashboard.validator.teamAccuracy": "Team accuracy",
    "dashboard.validator.vsYesterday": "vs yesterday",
    "dashboard.validator.vsLastWeek": "vs last week",
    "dashboard.validator.myValidationQueue": "My validation queue",
    "dashboard.validator.viewAll": "View all",
    "dashboard.validator.noPending": "No pending cases",
    "dashboard.validator.excellentWork": "Excellent work!",
    "dashboard.validator.priority": "Priority",
    "dashboard.validator.validate": "Validate",
    "dashboard.validator.unassigned": "Unassigned cases",
    "dashboard.validator.takeCharge": "Take charge",
    "dashboard.validator.recentValidations": "Recent validations",
    "dashboard.validator.performanceSummary": "Performance summary",
    "dashboard.validator.thisWeek": "This week",
    "dashboard.validator.cases": "cases",
    "dashboard.validator.approvalRate": "Approval rate",
    "dashboard.validator.avgTime": "Avg. time",
    "dashboard.validator.accuracy": "Accuracy",
    // Installer Dashboard
    "dashboard.installer.welcome": "Welcome",
    "dashboard.installer.activeCases": "Active cases",
    "dashboard.installer.approvedThisMonth": "Approved this month",
    "dashboard.installer.pendingPayment": "Pending payment",
    "dashboard.installer.vsLastMonth": "vs last month",
    "dashboard.installer.submitNew": "Submit a new case",
    "dashboard.installer.submitNewDesc": "Create a new EEC case for your recent installations",
    "dashboard.installer.submitNow": "Submit now",
    "dashboard.installer.recentCases": "Recent cases",
    "dashboard.installer.viewAll": "View all my cases",
    "dashboard.installer.paymentSummary": "Payment summary",
    "dashboard.installer.totalReceived": "Total received",
    "dashboard.installer.pendingPayments": "Pending payments",
    "dashboard.installer.viewPayments": "View payments",
    "dashboard.installer.alerts": "Alerts",
    "dashboard.installer.documentsRequired": "Documents required",
    "dashboard.installer.casesNeedAction": "{count} cases need your attention",
    "dashboard.installer.viewCases": "View cases",
    "dashboard.installer.startNewCase": "Start a new EEC case",
    "dashboard.installer.startNewCaseDesc": "Upload your documents and submit a new case for validation",
    "dashboard.installer.uploadDocuments": "Upload documents",
    "dashboard.installer.myRecentCases": "My recent cases",
    "dashboard.installer.submitted": "Submitted",
    "dashboard.installer.view": "View",
    "dashboard.installer.myPayments": "My payments",
    "dashboard.installer.viewAllPayments": "View all payments",
    "dashboard.installer.casesPaid": "{count} case(s) paid",
    "dashboard.installer.casesInProgress": "{count} case(s) in progress",
    "dashboard.installer.notifications": "Notifications",
    "dashboard.installer.ago": "{time} ago",
    // Common
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.create": "Create",
    "common.add": "Add",
    "common.remove": "Remove",
    "common.close": "Close",
    "common.back": "Back",
    "common.next": "Next",
    "common.previous": "Previous",
    "common.search": "Search",
    "common.filter": "Filter",
    "common.export": "Export",
    "common.import": "Import",
    "common.download": "Download",
    "common.upload": "Upload",
    "common.yes": "Yes",
    "common.no": "No",
    "common.all": "All",
    "common.none": "None",
    "common.loading": "Loading...",
    "common.error": "Error",
    "common.success": "Success",
    "common.warning": "Warning",
    "common.info": "Information",
    "common.confirm": "Confirm",
    "common.active": "Active",
    "common.inactive": "Inactive",
    "common.enabled": "Enabled",
    "common.disabled": "Disabled",
    "common.required": "Required",
    "common.optional": "Optional",
    "common.draft": "Draft",
    "common.published": "Published",
    "common.archived": "Archived",
    // Status
    "status.approved": "Approved",
    "status.rejected": "Rejected",
    "status.pending": "Pending",
    "status.inProgress": "In progress",
    "status.completed": "Completed",
    "status.failed": "Failed",
    "status.awaiting_review": "Awaiting review",
    "status.awaiting_documents": "Awaiting documents",
    "status.processing": "Processing",
    "status.draft": "Draft",
    "status.billed": "Billed",
    "status.paid": "Paid",
    "status.error": "Error",
    "status.active": "Active",
    "status.inactive": "Inactive",
    // Processes
    "processes.title": "Processes",
    "processes.subtitle": "{count} configured process{plural}",
    "processes.create": "Create process",
    "processes.import": "Import template",
    "processes.filter.category": "Category",
    "processes.filter.status": "Status",
    "processes.filter.allCategories": "All categories",
    "processes.filter.allStatuses": "All statuses",
    "processes.category.cee_residential": "CEE Residential",
    "processes.category.cee_tertiary": "CEE Tertiary",
    "processes.category.cee_industrial": "CEE Industrial",
    "processes.category.custom": "Custom",
    "processes.badge.active": "Active",
    "processes.badge.draft": "Draft",
    "processes.badge.coupDePouce": "Boost",
    "processes.stats.documents": "{count} documents",
    "processes.stats.rules": "{count} rules",
    "processes.stats.cases": "{count} cases",
    "processes.version": "Version {version}",
    "processes.updatedAt": "Updated on {date}",
    "processes.filter.search": "Search for a process...",
    // Process Configuration Wizard
    "processWizard.breadcrumb.home": "Home",
    "processWizard.breadcrumb.processes": "Processes",
    "processWizard.breadcrumb.new": "New",
    "processWizard.title.create": "Create process",
    "processWizard.title.edit": "Edit {code}",
    "processWizard.subtitle.create": "Configure a new EEC process",
    "processWizard.subtitle.edit": "Modify process configuration",
    "processWizard.button.back": "Back",
    "processWizard.button.preview": "Preview",
    "processWizard.button.saveDraft": "Save draft",
    "processWizard.button.activate": "Activate",
    "processWizard.tab.basic": "Basic information",
    "processWizard.tab.documents": "Required documents",
    "processWizard.tab.rules": "Validation rules",
    "processWizard.tab.settings": "Specific settings",
    "processWizard.basic.title": "Basic information",
    "processWizard.basic.description": "Define the main process information",
    "processWizard.basic.code": "Code",
    "processWizard.basic.codePlaceholder": "BAR-TH-171",
    "processWizard.basic.codeHint": "Format: Uppercase letters, numbers and dashes only",
    "processWizard.basic.name": "Name",
    "processWizard.basic.namePlaceholder": "Air/water heat pump",
    "processWizard.basic.category": "Category",
    "processWizard.basic.version": "Version",
    "processWizard.basic.versionPlaceholder": "1.0",
    "processWizard.basic.validFrom": "Valid from",
    "processWizard.basic.descriptionLabel": "Description",
    "processWizard.basic.descriptionPlaceholder": "Process description...",
    "processWizard.basic.coupDePouce": "Boost bonus",
    "processWizard.basic.coupDePoucheDesc": "Mark this process as eligible for Boost bonus",
    "processWizard.basic.active": "Active",
    "processWizard.basic.activeDesc": "Enable this process for case submission",
    "processWizard.documents.title": "Required documents",
    "processWizard.documents.description": "Define document types required for this process",
    "processWizard.documents.add": "Add document",
    "processWizard.documents.empty": "No required documents.",
    "processWizard.documents.emptyHint": "Click \"Add document\" to get started.",
    "processWizard.documents.type": "Document type",
    "processWizard.documents.required": "Required",
    "processWizard.documents.requiredYes": "Yes",
    "processWizard.documents.requiredOptional": "Optional",
    "processWizard.documents.quantity": "Quantity",
    "processWizard.documents.available": "Available document types to add",
    "processWizard.documents.dialogTitle": "Add required document",
    "processWizard.documents.dialogDescription": "Select a document type and configure its requirements",
    "processWizard.documents.selectType": "Document type",
    "processWizard.documents.selectPlaceholder": "Select a document type",
    "processWizard.documents.requiredLabel": "Required document",
    "processWizard.documents.requiredDesc": "This document is mandatory for the case",
    "processWizard.documents.condition": "Condition (optional)",
    "processWizard.documents.conditionPlaceholder": "e.g.: beneficiary.precarite !== 'CLASSIQUE'",
    "processWizard.documents.conditionHint": "Condition for which this document becomes required",
    "processWizard.documents.minCount": "Minimum quantity",
    "processWizard.documents.maxCount": "Maximum quantity",
    "processWizard.rules.title": "Cross-document validation rules",
    "processWizard.rules.description": "Select validation rules to apply for this process",
    "processWizard.rules.add": "Add rule",
    "processWizard.rules.empty": "No rules configured.",
    "processWizard.rules.emptyHint": "Click \"Add rule\" to select existing rules.",
    "processWizard.rules.browse": "Browse available rules",
    "processWizard.rules.rule": "Rule",
    "processWizard.rules.severity": "Severity",
    "processWizard.rules.statusLabel": "Status",
    "processWizard.rules.enabled": "Enabled",
    "processWizard.rules.disabled": "Disabled",
    "processWizard.rules.addMore": "Add more rules ({count} available)",
    "processWizard.rules.dialogTitle": "Add validation rules",
    "processWizard.rules.dialogDescription": "Select rules to apply for this process",
    "processWizard.rules.allAdded": "All rules have already been added.",
    "processWizard.rules.createNew": "Create new rule",
    "processWizard.rules.selected": "{count} rule(s) selected",
    "processWizard.settings.title": "Process-specific settings",
    "processWizard.settings.description": "Advanced configuration for this process type",
    "processWizard.settings.kwhFormula": "kWh Cumac calculation formula",
    "processWizard.settings.kwhPlaceholder": "surface * coefficient * climate_zone_factor",
    "processWizard.settings.climateZones": "Climate zones",
    "processWizard.settings.certifications": "Required RGE certifications",
    "processWizard.settings.certificationsPlaceholder": "QualiPAC, QualiSol...",
    "processWizard.settings.autoApprove": "Auto-approval threshold (%)",
    "processWizard.settings.autoApproveHint": "Cases with a higher confidence score will be auto-approved",
    // Dialogs
    "processWizard.addDocDialog.title": "Add required document",
    "processWizard.addDocDialog.description": "Select a document type and configure its requirements",
    "processWizard.addDocDialog.documentType": "Document type *",
    "processWizard.addDocDialog.selectPlaceholder": "Select a document type",
    "processWizard.addDocDialog.required": "Required document",
    "processWizard.addDocDialog.requiredHint": "This document is mandatory for the case",
    "processWizard.addDocDialog.condition": "Condition (optional)",
    "processWizard.addDocDialog.conditionPlaceholder": "eg: beneficiary.precarite !== 'CLASSIQUE'",
    "processWizard.addDocDialog.conditionHint": "Condition for which this document becomes required",
    "processWizard.addDocDialog.minCount": "Minimum quantity",
    "processWizard.addDocDialog.maxCount": "Maximum quantity",
    "processWizard.addDocDialog.cancel": "Cancel",
    "processWizard.addDocDialog.add": "Add",
    "processWizard.addRuleDialog.title": "Add validation rules",
    "processWizard.addRuleDialog.description": "Select rules to apply for this process",
    "processWizard.addRuleDialog.allRulesAdded": "All rules have already been added.",
    "processWizard.addRuleDialog.createNew": "Create a new rule",
    "processWizard.addRuleDialog.rulesSelected": "{count} rule(s) selected",
    "processWizard.addRuleDialog.cancel": "Cancel",
    "processWizard.addRuleDialog.add": "Add",
    "processWizard.addRuleDialog.addWithCount": "Add ({count})",
    // Rule Wizard
    "ruleWizard.breadcrumb.home": "Home",
    "ruleWizard.breadcrumb.rules": "Rules",
    "ruleWizard.breadcrumb.new": "New",
    "ruleWizard.title.create": "Create validation rule",
    "ruleWizard.title.edit": "Edit {code}",
    "ruleWizard.subtitle.create": "Define a new validation rule",
    "ruleWizard.subtitle.edit": "Edit the validation rule",
    "ruleWizard.button.back": "Back",
    "ruleWizard.button.test": "Test rule",
    "ruleWizard.button.save": "Save and activate",
    "ruleWizard.basic.title": "Rule information",
    "ruleWizard.basic.cardDescription": "Define the basic rule information",
    "ruleWizard.basic.code": "Code *",
    "ruleWizard.basic.name": "Name *",
    "ruleWizard.basic.namePlaceholder": "CEE Prime Consistency",
    "ruleWizard.basic.description": "Description",
    "ruleWizard.basic.descriptionPlaceholder": "Describe what this rule verifies...",
    "ruleWizard.basic.type": "Rule type *",
    "ruleWizard.basic.typeDocument": "Document rule",
    "ruleWizard.basic.typeCrossDocument": "Cross-document rule",
    "ruleWizard.basic.typeGlobal": "Global rule",
    "ruleWizard.basic.severity": "Severity *",
    "ruleWizard.basic.severityError": "Error",
    "ruleWizard.basic.severityWarning": "Warning",
    "ruleWizard.basic.severityInfo": "Information",
    "ruleWizard.basic.autoReject": "Auto reject",
    "ruleWizard.scope.title": "Rule scope",
    "ruleWizard.scope.description": "Define which processes and documents this rule applies to",
    "ruleWizard.scope.process": "Applies to process",
    "ruleWizard.scope.processPlaceholder": "Select a process",
    "ruleWizard.scope.allProcesses": "All processes",
    "ruleWizard.scope.documentTypesAvailable": "{count} document types available for this process",
    "ruleWizard.scope.documentTypes": "Document types",
    "ruleWizard.scope.documentTypesHint": "Select the document types affected by this rule",
    "ruleWizard.scope.fieldsCount": "({count} fields)",
    "ruleWizard.scope.warning": "⚠ Select at least one document type to access available fields",
    "ruleWizard.condition.title": "Condition builder",
    "ruleWizard.condition.description": "Define the validation logic",
    "ruleWizard.condition.tabVisual": "Visual",
    "ruleWizard.condition.tabExpression": "Expression",
    "ruleWizard.condition.emptyState": "Select document types to access fields",
    "ruleWizard.condition.sourceField": "Source field",
    "ruleWizard.condition.operator": "Operator",
    "ruleWizard.condition.operatorEquals": "equals",
    "ruleWizard.condition.operatorNotEquals": "not equals",
    "ruleWizard.condition.operatorGreaterThan": "greater than",
    "ruleWizard.condition.operatorLessThan": "less than",
    "ruleWizard.condition.operatorGreaterOrEqual": "greater or equal",
    "ruleWizard.condition.operatorLessOrEqual": "less or equal",
    "ruleWizard.condition.operatorContains": "contains",
    "ruleWizard.condition.operatorStartsWith": "starts with",
    "ruleWizard.condition.operatorEndsWith": "ends with",
    "ruleWizard.condition.operatorIsEmpty": "is empty",
    "ruleWizard.condition.operatorIsNotEmpty": "is not empty",
    "ruleWizard.condition.type": "Type",
    "ruleWizard.condition.typeStatic": "Static value",
    "ruleWizard.condition.typeField": "Other field",
    "ruleWizard.condition.targetField": "Target field",
    "ruleWizard.condition.value": "Value",
    "ruleWizard.condition.addCondition": "Add condition",
    "ruleWizard.condition.expressionHint": "Use JavaScript syntax to define the condition",
    "ruleWizard.error.title": "Error message",
    "ruleWizard.error.description": "Message displayed when the rule fails",
    "ruleWizard.error.placeholder": "The CEE prime amount differs between documents...",
    "ruleWizard.error.hint": "Use {field_name} to insert dynamic values",
    "ruleWizard.sidebar.statusTitle": "Status",
    "ruleWizard.sidebar.activeRule": "Active rule",
    "ruleWizard.sidebar.autoReject": "Automatic rejection",
    "ruleWizard.sidebar.statisticsTitle": "Statistics",
    "ruleWizard.sidebar.evaluations": "Evaluations",
    "ruleWizard.sidebar.successRate": "Success rate",
    "ruleWizard.sidebar.overrides": "Overrides",
    "ruleWizard.sidebar.fieldsTitle": "Available fields",
    "ruleWizard.sidebar.fieldsHint": "Click to copy the field path",
    "ruleWizard.sidebar.fieldsEmptyState": "Select document types to see available fields",
    "ruleWizard.sidebar.clickToCopy": "Click to copy: {path}",
    // Document Type Wizard
    "docTypeWizard.breadcrumb.home": "Home",
    "docTypeWizard.breadcrumb.config": "Configuration",
    "docTypeWizard.breadcrumb.types": "Document types",
    "docTypeWizard.breadcrumb.new": "New",
    "docTypeWizard.title.create": "Create document type",
    "docTypeWizard.title.edit": "Edit {code}",
    "docTypeWizard.subtitle.create": "Define a new document type and its fields",
    "docTypeWizard.subtitle.edit": "Edit the document type configuration",
    "docTypeWizard.button.back": "Back",
    "docTypeWizard.button.preview": "Preview",
    "docTypeWizard.button.save": "Save",
    "docTypeWizard.tab.basic": "Basic information",
    "docTypeWizard.tab.fields": "Field schema",
    "docTypeWizard.tab.extraction": "Extraction settings",
    "docTypeWizard.basic.title": "Basic information",
    "docTypeWizard.basic.cardDescription": "Define the main information of the document type",
    "docTypeWizard.basic.code": "Code *",
    "docTypeWizard.basic.codeHint": "Unique identifier of the document type",
    "docTypeWizard.basic.name": "Name *",
    "docTypeWizard.basic.category": "Category *",
    "docTypeWizard.basic.expectedPages": "Expected pages",
    "docTypeWizard.basic.pageRange.from": "from",
    "docTypeWizard.basic.pageRange.to": "to",
    "docTypeWizard.basic.pageRange.pages": "pages",
    "docTypeWizard.basic.description": "Description",
    "docTypeWizard.basic.descriptionPlaceholder": "Document type description...",
    "docTypeWizard.basic.classificationHints": "Classification hints",
    "docTypeWizard.basic.classificationHintsPlaceholder": "quote, proposal, estimation",
    "docTypeWizard.basic.classificationHintsHint": "Keywords separated by commas to help classify this document type",
    "docTypeWizard.basic.active": "Active",
    "docTypeWizard.basic.activeHint": "This document type can be used in processes",
    "docTypeWizard.dataType.text": "Text",
    "docTypeWizard.dataType.integer": "Integer",
    "docTypeWizard.dataType.decimal": "Decimal",
    "docTypeWizard.dataType.currency": "Currency",
    "docTypeWizard.dataType.date": "Date",
    "docTypeWizard.dataType.boolean": "Boolean",
    "docTypeWizard.dataType.email": "Email",
    "docTypeWizard.dataType.phone": "Phone",
    "docTypeWizard.dataType.address": "Address",
    "docTypeWizard.dataType.enum": "List of values",
    "docTypeWizard.dataType.signature": "Signature",
    "docTypeWizard.category.commercial": "Commercial",
    "docTypeWizard.category.legal": "Legal",
    "docTypeWizard.category.administrative": "Administrative",
    "docTypeWizard.category.technical": "Technical",
    "docTypeWizard.category.photos": "Photos",
    "docTypeWizard.fields.title": "Field schema",
    "docTypeWizard.fields.description": "Define the fields to extract from this document type",
    "docTypeWizard.fields.addField": "Add field",
    "docTypeWizard.fields.emptyTitle": "No fields defined",
    "docTypeWizard.fields.emptyDescription": "Click \"Add field\" to start defining the schema",
    "docTypeWizard.fields.addFirstField": "Add first field",
    "docTypeWizard.fields.required": "Required",
    "docTypeWizard.fields.confidence": "Confidence: {value}%",
    "docTypeWizard.fields.othersGroup": "Others",
    "docTypeWizard.fields.extractionHints": "Extraction hints",
    "docTypeWizard.fields.postProcessing": "Post-processing",
    "docTypeWizard.fields.uppercase": "Uppercase",
    "docTypeWizard.fields.lowercase": "Lowercase",
    "docTypeWizard.fields.trim": "Trim",
    "docTypeWizard.fields.removeSpecialChars": "Without special characters",
    "docTypeWizard.fields.none": "None",
    "docTypeWizard.fields.crossRefFields": "Cross-reference fields",
    "docTypeWizard.extraction.title": "Extraction settings",
    "docTypeWizard.extraction.description": "Advanced configuration for data extraction",
    "docTypeWizard.extraction.defaultConfidence": "Default confidence threshold (%)",
    "docTypeWizard.extraction.defaultConfidenceHint": "Minimum confidence threshold to validate an extraction",
    "docTypeWizard.extraction.strictOcr": "Strict OCR validation",
    "docTypeWizard.extraction.strictOcrHint": "Reject extractions with insufficient OCR quality",
    "docTypeWizard.extraction.multiPage": "Multi-page extraction",
    "docTypeWizard.extraction.multiPageHint": "Allow extraction of fields distributed across multiple pages",
    "docTypeWizard.fieldDialog.titleEdit": "Edit field",
    "docTypeWizard.fieldDialog.titleAdd": "Add a new field",
    "docTypeWizard.fieldDialog.description": "Define the properties of the field to extract",
    "docTypeWizard.fieldDialog.internalName": "Internal name *",
    "docTypeWizard.fieldDialog.internalNameHint": "Used in rules and expressions",
    "docTypeWizard.fieldDialog.displayName": "Display name *",
    "docTypeWizard.fieldDialog.dataType": "Data type *",
    "docTypeWizard.fieldDialog.group": "Group",
    "docTypeWizard.fieldDialog.groupPlaceholder": "Identification, Financial, Technical...",
    "docTypeWizard.fieldDialog.extractionHints": "Extraction hints",
    "docTypeWizard.fieldDialog.extractionHintsPlaceholder": "prime, cee, amount, energy",
    "docTypeWizard.fieldDialog.extractionHintsHint": "Keywords separated by commas to help locate this field",
    "docTypeWizard.fieldDialog.confidence": "Confidence threshold (%)",
    "docTypeWizard.fieldDialog.required": "Required field",
    "docTypeWizard.fieldDialog.maxLength": "Max length",
    "docTypeWizard.fieldDialog.validationRegex": "Validation regex",
    "docTypeWizard.fieldDialog.minValue": "Minimum value",
    "docTypeWizard.fieldDialog.maxValue": "Maximum value",
    "docTypeWizard.fieldDialog.enumValues": "Possible values",
    "docTypeWizard.fieldDialog.enumValuesHint": "One value per line",
    "docTypeWizard.fieldDialog.postProcessing": "Post-processing",
    "docTypeWizard.fieldDialog.postProcessingHint": "Remove whitespace",
    "docTypeWizard.fieldDialog.crossRefFields": "Cross-reference fields",
    "docTypeWizard.fieldDialog.crossRefFieldsPlaceholder": "invoice.prime_cee, cdc.prime_amount",
    "docTypeWizard.fieldDialog.crossRefFieldsHint": "Fields from other documents for automatic comparison",
    "docTypeWizard.fieldDialog.cancel": "Cancel",
    "docTypeWizard.fieldDialog.add": "Add",
    "docTypeWizard.common.copy": "(copy)",
    // Rules
    "rules.title": "Validation rules",
    "rules.subtitle": "{count} configured rule{plural}",
    "rules.create": "Create rule",
    "rules.import": "Import rules",
    "rules.tabs.all": "All rules ({count})",
    "rules.tabs.document": "Document rules ({count})",
    "rules.tabs.crossDocument": "Cross-document rules ({count})",
    "rules.tabs.global": "Global rules ({count})",
    "rules.type.document": "Document",
    "rules.type.cross_document": "Cross-document",
    "rules.type.global": "Global",
    "rules.severity.error": "Error",
    "rules.severity.warning": "Warning",
    "rules.severity.info": "Info",
    "rules.stats.passed": "{passed}/{total} passed",
    "rules.stats.overrides": "{count} overrides",
    "rules.filter.search": "Search",
    "rules.filter.searchPlaceholder": "Search for a rule...",
    "rules.filter.severity": "Severity",
    "rules.filter.severityAll": "All severities",
    "rules.filter.status": "Status",
    "rules.filter.statusAll": "All statuses",
    "rules.table.code": "Code",
    "rules.table.name": "Name",
    "rules.table.type": "Type",
    "rules.table.severity": "Severity",
    "rules.table.appliesTo": "Applies to",
    "rules.table.statistics": "Statistics",
    "rules.table.active": "Active",
    "rules.table.actions": "Actions",
    // Document Types
    "documentTypes.title": "Document types",
    "documentTypes.subtitle": "{count} document type{plural}",
    "documentTypes.create": "Create type",
    "documentTypes.import": "Import types",
    "documentTypes.category.commercial": "Commercial",
    "documentTypes.category.technical": "Technical",
    "documentTypes.category.administrative": "Administrative",
    "documentTypes.category.financial": "Financial",
    "documentTypes.category.legal": "Legal",
    "documentTypes.badge.system": "System",
    "documentTypes.badge.custom": "Custom",
    "documentTypes.stats.fields": "{count} fields",
    "documentTypes.stats.rules": "{count} rules",
    "documentTypes.filter.search": "Search",
    "documentTypes.filter.searchPlaceholder": "Search for a document type...",
    "documentTypes.filter.category": "Category",
    "documentTypes.filter.categoryAll": "All categories",
    "documentTypes.filter.type": "Type",
    "documentTypes.filter.typeAll": "All",
    "documentTypes.filter.typeSystem": "System",
    "documentTypes.filter.typeCustom": "Custom",
    "documentTypes.category.photos": "Photos",
    "documentTypes.table.code": "Code",
    "documentTypes.table.name": "Name",
    "documentTypes.table.category": "Category",
    "documentTypes.table.fields": "Fields",
    "documentTypes.table.rules": "Rules",
    "documentTypes.table.system": "System",
    "documentTypes.table.status": "Status",
    "documentTypes.table.actions": "Actions",
    // Cases/Dossiers
    "cases.title": "Cases",
    "cases.subtitle": "{count} total cases",
    "cases.export": "Export",
    "cases.new": "New case",
    "cases.search": "Search by reference, beneficiary, installer...",
    "cases.filters.status": "Pending",
    "cases.filters.allProcesses": "All processes",
    "cases.filters.allInstallers": "All installers",
    "cases.filters.allValidators": "All validators",
    "cases.table.reference": "Reference",
    "cases.table.beneficiary": "Beneficiary",
    "cases.table.process": "Process",
    "cases.table.installer": "Installer",
    "cases.table.status": "Status",
    "cases.table.confidence": "Confidence",
    "cases.table.validator": "Validator",
    "cases.table.updated": "Updated",
    "cases.pagination.showing": "Showing {start} to {end} of {total} results",
    "cases.pagination.previous": "Previous",
    "cases.pagination.next": "Next",
    // Billing
    "billing.readyToInvoice": "Ready to invoice",
    "billing.invoicedThisMonth": "Invoiced this month",
    "billing.paidThisMonth": "Paid this month",
    "billing.pending": "Pending",
    "billing.table.title": "Ready to invoice",
    "billing.table.subtitle": "Approved cases awaiting invoicing",
    "billing.table.approvalDate": "Approval date",
    "billing.table.primeAmount": "Prime Amount",
    "billing.table.actions": "Actions",
    "billing.action.invoice": "Invoice",
    "billing.activity.title": "Recent activity",
    "billing.activity.subtitle": "Latest invoicing actions",
    "billing.activity.action": "Action",
    "billing.activity.amount": "Amount",
    "billing.activity.date": "Date",
    "billing.activity.user": "User",
    "billing.status.paid": "Paid",
    "billing.status.invoiced": "Invoiced",
    // Actions
    "actions.viewDetails": "View details",
    "actions.validate": "Validate",
    "actions.assignValidator": "Assign validator",
    "actions.markPriority": "Mark as priority",
  },
};

function format(template: string, params?: TranslateParams) {
  if (!params) return template;
  return template.replace(/\{(.*?)\}/g, (_, token) => {
    const value = params[token.trim()];
    return value !== undefined ? String(value) : `{${token}}`;
  });
}

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [lang, setLang] = useState<SupportedLanguage>(() => {
    if (typeof window === "undefined") {
      return defaultLanguage;
    }
    const stored = window.localStorage.getItem("lang") as SupportedLanguage | null;
    return stored ?? defaultLanguage;
  });

  useEffect(() => {
    if (typeof window !== "undefined") {
      window.localStorage.setItem("lang", lang);
      document.documentElement.lang = lang;
    }
  }, [lang]);

  const t = useCallback(
    (key: string, params?: TranslateParams, fallback?: string) => {
      const template =
        translations[lang]?.[key] ?? translations[defaultLanguage]?.[key] ?? fallback ?? key;
      return format(template, params);
    },
    [lang]
  );

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t]);

  return <LanguageContext.Provider value={value}>{children}</LanguageContext.Provider>;
}

export function useLanguage() {
  const ctx = useContext(LanguageContext);
  if (!ctx) {
    throw new Error("useLanguage must be used within LanguageProvider");
  }
  return ctx;
}

export function useTranslation() {
  const { t, lang } = useLanguage();
  return { t, lang };
}
